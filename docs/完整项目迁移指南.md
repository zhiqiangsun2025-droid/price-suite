# 🚀 完整项目迁移指南（用于云服务器远程开发）

## 📦 迁移包信息

**文件**: `price-suite-full-20251024.tar.gz`  
**大小**: 220KB  
**内容**: 完整项目（客户端+服务器+文档+脚本）  
**用途**: 迁移到云服务器进行前后端远程开发  

---

## 🎯 迁移步骤（3步）

### 第1步：上传到服务器

```bash
# 在本地WSL执行
cd /home/user/projects/shopxo-master/apps/price-suite

# 上传（替换你的服务器IP）
scp price-suite-full-20251024.tar.gz root@你的服务器IP:/opt/

# 如果有域名
scp price-suite-full-20251024.tar.gz root@your-domain.com:/opt/
```

### 第2步：解压并部署

```bash
# SSH登录服务器
ssh root@你的服务器IP

# 解压
cd /opt
tar -xzf price-suite-full-20251024.tar.gz
cd price-suite-full-20251024

# 一键部署（安装所有依赖）
./deploy.sh
```

### 第3步：启动服务

```bash
# 启动Flask服务器
cd server
python3 app.py

# 或使用生产模式（后台运行）
gunicorn -w 4 -b 0.0.0.0:5000 app:app --daemon
```

---

## 💻 Cursor远程开发配置

### 配置SSH连接

**编辑 `~/.ssh/config`**：
```
Host price-suite
  HostName 你的服务器IP
  User root
  Port 22
  IdentityFile ~/.ssh/id_rsa
```

### 在Cursor中连接

```
1. Cursor → 左下角绿色图标
2. 点击 "Connect to Host"
3. 选择 "price-suite"
4. 连接成功后，打开文件夹: /opt/price-suite-full-20251024
```

### 开始远程开发

```
✅ 编辑客户端代码: client/modern_client_ultimate.py
✅ 编辑服务器代码: server/app.py
✅ 编辑RPA代码: server/web_auto_listing.py
✅ 查看日志: server/app.log
✅ 实时调试: 代码修改立即生效
```

---

## 📂 完整项目结构

```
price-suite-full-20251024/
│
├── client/                           # 客户端（前端）
│   ├── modern_client_ultimate.py    # 主程序
│   ├── config_client.json           # 配置
│   ├── requirements_modern.txt      # 依赖
│   └── encryption.py                # 加密工具
│
├── server/                           # 服务器（后端）
│   ├── app.py                       # Flask主程序
│   ├── douyin_scraper_v2.py         # 抖音爬虫
│   ├── ai_matcher.py                # AI匹配
│   ├── web_auto_listing.py          # 网页自动上货（新）
│   ├── app_listing_api.py           # 上货API（新）
│   ├── admin_tool.py                # 管理工具
│   ├── requirements.txt             # 依赖
│   ├── templates/                   # 管理后台页面
│   └── static/                      # 静态资源
│
├── rpa/                              # RPA模块（参考）
│   ├── rpa_controller.py            # 控制器
│   └── README_RPA.md                # 说明
│
├── docs/                             # 完整文档
│   ├── README.md                    # 文档索引
│   ├── 服务器迁移完整指南.md
│   ├── 网页自动上货方案.md
│   ├── RPA模块说明.md
│   └── archive/                     # 历史文档
│
├── scripts/                          # 工具脚本
│   ├── windows/                     # Windows脚本
│   └── linux/                       # Linux脚本
│
├── .github/workflows/                # CI/CD
│   └── build-simple.yml             # 自动打包EXE
│
├── deploy.sh                         # 一键部署脚本
├── README.md                         # 项目说明
└── README-DEPLOY.md                  # 部署说明
```

---

## 🔧 远程开发工作流

### 日常开发流程

```
┌─────────────────────────────────┐
│ 本地Cursor（连接远程服务器）     │
│                                  │
│ 1. 编辑代码                      │
│    server/app.py                │
│    client/modern_client_ultimate.py │
│                                  │
│ 2. Ctrl+S 保存                  │
│    → 自动同步到服务器            │
│                                  │
│ 3. 终端测试                      │
│    cd server && python3 app.py  │
│                                  │
│ 4. Git提交                       │
│    git add -A                    │
│    git commit -m "..."           │
│    git push origin main          │
└─────────────────────────────────┘
           ↓
┌─────────────────────────────────┐
│ GitHub Actions（自动打包）       │
│                                  │
│ 推送代码 → 自动打包EXE           │
│ 5-10分钟后 → 下载产物            │
└─────────────────────────────────┘
```

### 客户端开发

```bash
# 在服务器上编辑客户端代码
vim /opt/price-suite-full-20251024/client/modern_client_ultimate.py

# 提交到Git
git add client/
git commit -m "客户端功能更新"
git push

# GitHub Actions自动打包Windows EXE
# 5分钟后下载: https://github.com/你的仓库/actions
```

### 服务器端开发

```bash
# 直接在服务器编辑
vim /opt/price-suite-full-20251024/server/app.py

# 重启服务
cd /opt/price-suite-full-20251024/server
pkill -f "python3 app.py"
python3 app.py &

# 查看日志
tail -f app.log
```

---

## 🌐 网络配置

### 开放端口
```bash
# 开放Flask端口
ufw allow 5000

# 如果用Nginx反向代理
ufw allow 80
ufw allow 443
```

### 配置Nginx（可选，生产推荐）
```nginx
# /etc/nginx/sites-available/price-suite
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

---

## 🔐 Git配置（服务器上）

### 初始化Git（如果需要）
```bash
cd /opt/price-suite-full-20251024

# 配置Git用户信息
git config --global user.name "Your Name"
git config --global user.email "your@email.com"

# 关联远程仓库
git remote add origin git@github.com:zhiqiangsun2025-droid/price-suite.git

# 拉取最新代码
git pull origin main
```

### 开发提交流程
```bash
# 修改代码后
git add .
git commit -m "服务器端功能优化"
git push origin main
```

---

## 📊 开发环境对比

| 维度 | 本地WSL | 远程服务器 |
|------|---------|-----------|
| **客户端开发** | ✅ 可以 | ✅ 可以 |
| **服务器开发** | ⚠️ 需要本地运行 | ✅ 直接修改生产环境 |
| **测试** | ⚠️ 模拟环境 | ✅ 真实环境 |
| **调试** | ⚠️ 本地环境 | ✅ 生产数据 |
| **网络延迟** | ✅ 无 | ⚠️ 有SSH延迟 |
| **打包EXE** | ❌ 困难 | ✅ GitHub Actions |

**推荐**: 服务器远程开发 + GitHub Actions打包

---

## ✅ 迁移后的优势

### 开发效率
- ✅ 真实环境测试
- ✅ 代码立即生效
- ✅ 无需本地配置环境
- ✅ 团队协作方便

### 部署简化
- ✅ 修改即生效
- ✅ 无需上传下载
- ✅ 日志实时查看
- ✅ 问题快速定位

---

## 🎯 下一步行动

### 1. 立即执行迁移
```bash
scp price-suite-full-20251024.tar.gz root@你的服务器IP:/opt/
```

### 2. 服务器部署
```bash
ssh root@你的服务器IP
cd /opt
tar -xzf price-suite-full-20251024.tar.gz
cd price-suite-full-20251024
./deploy.sh
```

### 3. Cursor连接
```
Cursor → Remote-SSH → 连接服务器
打开目录: /opt/price-suite-full-20251024
```

### 4. 开始开发
```
✅ 前后端代码都在这个目录
✅ 直接编辑、保存、测试
✅ Git提交推送
```

---

**完整项目已打包，220KB，随时可迁移！** 🎊

